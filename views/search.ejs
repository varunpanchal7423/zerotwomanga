<!DOCTYPE html>
<head>
  <style>
    .cards-list {
  z-index: 0;
  width: 100%;
  display: flex;
  justify-content: space-around;
  flex-wrap: wrap;
}

.card {
  margin: 50px auto;
  width: 300px;
  height: 400px;
  border-radius: 40px;
box-shadow: 5px 5px 30px 7px rgba(0,0,0,0.25), -5px -5px 30px 7px rgba(0,0,0,0.22);
  cursor: pointer;
  transition: 0.4s;
}

.card .card_image {
  width: inherit;
  height: inherit;
  border-radius: 40px;
}

.card .card_image img {
  width: inherit;
  height: inherit;
  border-radius: 40px;
  object-fit:fill;
}

.card .card_title {
  text-align: center;
  border-radius: 0px 0px 40px 40px;
  font-family: sans-serif;
  font-weight: bold;
  font-size: 15px;
  height: 40px;
}

.card:hover {
  transform: scale(0.9, 0.9);
  box-shadow: 5px 5px 30px 15px rgba(0,0,0,0.25), 
    -5px -5px 30px 15px rgba(0,0,0,0.22);
}

.title-white {
  color: white;
}

.title-black {
  color: black;
}

@media all and (max-width: 500px) {
  .card-list {
    /* On small screens, we are no longer using row direction but column */
    flex-direction: column;
  }
}


/*
.card {
  margin: 30px auto;
  width: 300px;
  height: 300px;
  border-radius: 40px;
  background-image: url('https://i.redd.it/b3esnz5ra34y.jpg');
  background-size: cover;
  background-repeat: no-repeat;
  background-position: center;
  background-repeat: no-repeat;
box-shadow: 5px 5px 30px 7px rgba(0,0,0,0.25), -5px -5px 30px 7px rgba(0,0,0,0.22);
  transition: 0.4s;
}
*/
  </style>

<script>

  function loadImage(img) {
  const url = "/data?imgurl="+img.getAttribute("src");
  if(url.includes("uploads")){
  const xhr = new XMLHttpRequest();
  xhr.open('GET', url);
  xhr.onload = function() {
  const arrayBuffer = xhr.response;
  img.setAttribute("src","data:image/jpeg;base64,"+arrayBuffer);
  };
  xhr.send();
}
  }
</script>

</head>
<body>
    <form action="/search" method="POST">
        <lable>Enter Name
            <input type="text" name="manganame" />
        </lable>
        <button type="submit">Search</button>
    </form>
    <h1>List of Manga</h1>
      <div class="cards-list">
        <% for(var i = 0; i < locals.data.length ; i++ ) { %>
        <a href="/manga/<%=locals.data[i].id%>" style="text-decoration:none">  
        <div class="card">
            <div class="card_image">
              <% for(var j=0; j < locals.data[i].relationships.length ; j++) { %>
                <% if (locals.data[i].relationships[j].type == "cover_art") { %>
              <img src="https://uploads.mangadex.org/covers/<%=locals.data[i].id%>/<%= locals.data[i].relationships[j].attributes.fileName %>" onload="loadImage(this);" />
              <% } %>
             <% } %>
              </div>
            <div class="card_title title-black">
              <p><%= locals.data[i].attributes.title.en %></p>
            </div>
            </div>
        </a>
        
        <% } %>
        </div>

</body>
</html>